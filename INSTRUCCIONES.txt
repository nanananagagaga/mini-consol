Mini Consola - Block Model Processor
====================================

Aplicaci√≥n para procesar m√∫ltiples archivos CSV de block models, aplicar reglas de capping y calcular variables derivadas.

üöÄ C√ìMO USAR
============

1. Preparar archivos CSV
------------------------
- Coloca todos tus block models (.csv) en una carpeta
- IMPORTANTE: Todos los archivos deben tener las mismas columnas principales
- La aplicaci√≥n maneja autom√°ticamente filas problem√°ticas de Vulcan (metadata en filas 2-4)

2. Ejecutar aplicaci√≥n
----------------------
python main.py

3. Configurar (4 pasos)
-----------------------

üìÅ Pesta√±a 1 - Archivos:
- Selecciona carpeta con tus CSVs
- Edita etiquetas de fase para cada archivo (ej: "10", "13A", "15")

üîß Pesta√±a 2 - Columnas:
- Mapea tus columnas a variables requeridas:
  * CUT_OP: Ley de corte original
  * RST_OP: Recuperaci√≥n operacional  
  * PAS_CUT: Variable categ√≥rica para capping
- Click "Analizar Columnas" para detectar autom√°ticamente

üìã Pesta√±a 3 - Reglas de Capping:
- Agrega reglas por fase + pas_cut + rango de valores
- Ejemplo: Fase "10", PAS_CUT "3", rango 0.5-1.0 ‚Üí multiplicar por 0.9

‚öôÔ∏è Pesta√±a 4 - Procesar:
- Elige opci√≥n de guardado:
  * üìÑ Duplicados (recomendado): Crea copias _capeado.csv
  * ‚ö†Ô∏è Actualizar originales: Sobrescribe archivos originales
  * üìä Consolidar: Todo en un archivo blockmodel_capeado.csv

üìä VARIABLES CALCULADAS
========================

- CUT_PLAN: CUT_OP con reglas de capping aplicadas
- CUS_PLAN: RST_OP √ó CUT_PLAN (f√≥rmula configurable en c√≥digo)

‚ö†Ô∏è CONSIDERACIONES IMPORTANTES
===============================

Para que funcione correctamente:
--------------------------------
1. Columnas obligatorias: Todos los CSVs deben tener columnas para CUT_OP, RST_OP y PAS_CUT
2. Estructura consistente: Mismos headers en todos los archivos
3. Datos num√©ricos: CUT_OP y RST_OP deben ser valores num√©ricos
4. PAS_CUT categ√≥rico: Puede ser texto o n√∫meros (se convierte a string)

Archivos problem√°ticos:
-----------------------
- ‚úÖ Maneja filas de metadata de Vulcan autom√°ticamente
- ‚úÖ Detecta y omite filas con headers duplicados
- ‚úÖ Reporta archivos que no se pueden leer

Reglas de capping:
------------------
- Los rangos son: [m√≠nimo, m√°ximo) - m√≠nimo inclusive, m√°ximo exclusivo
- Multiplicadores deben ser > 0
- Si no hay regla para una combinaci√≥n fase/pas_cut, CUT_PLAN = CUT_OP

üîß PERSONALIZACI√ìN
==================

Cambiar f√≥rmula CUS_PLAN:
-------------------------
Edita l√≠nea 21 en data_processor.py:
self.cus_plan_formula = "rst_op * cut_plan"  # Cambiar aqu√≠

üìÇ ARCHIVOS GENERADOS
=====================

Opci√≥n Duplicados:
------------------
- archivo_original.csv ‚Üí archivo_original_capeado.csv
- Agrega columnas: FASE, CUT_PLAN, CUS_PLAN

Opci√≥n Consolidado:
-------------------
- Un solo archivo: blockmodel_capeado.csv
- Todas las filas de todos los BMs juntas

üêõ SOLUCI√ìN DE PROBLEMAS
========================

"No hay columnas comunes":
--------------------------
- Verifica que todos los CSVs tengan la misma estructura
- Revisa nombres de columnas (sensible a may√∫sculas)

"Error leyendo CSV":
--------------------
- Archivo no debe estar abierto en Excel
- Verifica codificaci√≥n UTF-8
- Revisa que tenga headers v√°lidos

"No se aplicaron reglas":
-------------------------
- Etiquetas de fase deben coincidir exactamente
- Valores PAS_CUT son sensibles a may√∫sculas/espacios

üìã INSTALACI√ìN
==============

pip install pandas

Solo requiere Python 3.7+ y pandas. Tkinter viene incluido con Python.